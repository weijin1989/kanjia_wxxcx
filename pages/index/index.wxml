<!--index.wxml-->
<view class="container">

  <view class="modalDlg" wx:if="{{is_showModal}}">
    <button type="primary" wx:if="{{canIUse}}" open-type="getUserInfo" class="getUserInfo" bindgetuserinfo="bindGetUserInfo">使用微信授权登录</button>
    <view wx:else>请升级微信版本</view>
  </view>

  <view class="top bg_fff br_12">
    <view class="search">
      <input type="text" placeholder-class="s_but_placeholder" bindtap="search" bindconfirm="changeCon" class="s_but" confirm-type='search' placeholder="搜索店铺名或者菜名"></input>
      <icon class="searchIcon" color="#A3A3A3" size="18" type="search"></icon>
    </view>
    <!--正在抢购-->
    <view class="panic_buying">
      <view class="h1">
        <image class="wz" src="../../images/text1.png"></image>
        <label bindtap="more_hot">更多
          <image class="returnImg" src="../../images/icon9.png"></image>
        </label>
      </view>
      <view class="ul cf">
        <swiper style="height: 390rpx;" autoplay="true" interval="3000" duration="700" display-multiple-items="2">
          <block wx:for="{{hot_list}}" wx:key="this">
            <swiper-item>
              <view class="li" bindtap="toProductInfo" data-index="{{index}}" data-id='{{item.shopid}}'>
                <view class="qg_img">
                  <image src="{{siteurl}}{{item.imgsrc}}" mode="aspectFill"></image>
                </view>
                <label class="name">{{item.subject}}</label>
                <view class="introduction">{{item.mername}}
                  <text>{{item.distance}}km</text>
                </view>
                <view class="price">￥{{item.price}}
                  <text>￥{{item.costprice}}</text>
                </view>
              </view>
            </swiper-item>
          </block>
        </swiper>
      </view>
    </view>
  </view>
  <!--附近美食-->
  <view class="nearby bg_fff br_12">
    <view class="nearby_title">
      <image src="../../images/text2.png"></image>
    </view>
    <!-- <scroll-view class="nearby_nav" scroll-x="true" scroll-left="{{x}}" scroll-with-animation="{{true}}">
      <view class='lis {{item.catid == type_id?"cur":""}}' wx:for="{{nav_list}}"  wx:key="{{item.catid}}"  data-type="{{item.catid}}" bindtap='switchTap' data-index="{{index}}">
          <view>{{item.name}}</view>
      </view>
    </scroll-view> -->
    <product_type modelValue='1' bind:get_cate_shop_event="get_cate_shop_event"></product_type>
    <view class="list bg_fff">

      <view class="list_li cf" wx:for="{{cp_list}}" wx:key="{{item.shopid}}" data-type="{{item.subject}}" data-index="{{index}}">
        <view class="left" bindtap="toProductInfo" data-id='{{item.shopid}}'>
          <image src="{{siteurl}}{{item.imgsrc}}" mode="aspectFill"></image>
        </view>
        <view class="right">
          <view class="h2" bindtap="toProductInfo" data-id='{{item.shopid}}'>{{item.subject}}</view>
          <view class="introduction">{{item.mername}}
            <text>{{item.distance}}km</text>
          </view>
          <view class="cf">
            <view class="stock">已售{{item.residue}}件
              <text>仅剩{{item.num}}件</text>
            </view>
          </view>
          <view class="price">￥{{item.payprice}}
            <text>￥{{item.costprice}}</text>
          </view>
          <view class="but" wx:if="{{memberid>0}}">
            <button class="buts but1" bindtap="toProductInfo" data-id='{{item.shopid}}'>立即购买</button>
            <button class="buts but2" wx:if="{{item.isbargain=='N'}}" bindtap="bargain" data-obj="{{item}}" data-index="{{index}}">我要砍价</button>
            <button class="buts but3" wx:if="{{item.isbargain=='Y'}}" open-type="share" data-obj="{{item}}">继续砍</button>
          </view>
          <view class="but" wx:else>
            <button class="buts but1" open-type="getPhoneNumber" bindgetphonenumber="getPhoneNumber" data-id='{{item.shopid}}'>立即购买</button>
            <button class="buts but2" open-type="getPhoneNumber" bindgetphonenumber="getPhoneNumber" data-obj="{{item}}" data-index="{{index}}">我要砍价</button>
          </view>
        </view>
      </view>


    </view>
  </view>
  <!--附近美食-->
  <!-- <view class="userinfo">
    <button wx:if="{{!hasUserInfo && canIUse}}" open-type="getUserInfo" bindgetuserinfo="getUserInfo"> 获取头像昵称 </button>
    <block wx:else>
      <image bindtap="bindViewTap" class="userinfo-avatar" src="{{userInfo.avatarUrl}}" mode="cover"></image>
      <text class="userinfo-nickname">{{userInfo.nickName}}</text>
    </block>
  </view>
  <view class="usermotto">
   <button open-type="getPhoneNumber" bindgetphonenumber="getPhoneNumber">获取手机号码</button>
  </view>
  <view class="usermotto">
    <text class="user-motto" bindtap='toMap'>地图demo</text>
  </view>
  <view class="usermotto">
    <text class="user-motto" bindtap='toSwiper'>图片滚动demo</text>
  </view>
  <view class="usermotto">
    <text class="user-motto" bindtap='toProgress'>进度条demo</text>
  </view>
  <view class="usermotto">
    <text class="user-motto" bindtap='toFrom'>from表单提交demo</text>
  </view>
  <view class="usermotto">
    <text class="user-motto" bindtap='toCamera'>camera相机demo</text>
  </view>audio/audio
  <view class="usermotto">
    <text class="user-motto" bindtap='toAudio'>audio播放音频demo</text>
  </view> -->
</view>